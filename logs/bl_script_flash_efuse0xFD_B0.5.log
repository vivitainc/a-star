
bl_flasher_win.sh v1.0 for 328pb


-----------------------------
MCU      : 328PB
PORT     : COM4
FILENAME : flash
-----------------------------

avrdude -C C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf -C +C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf -v -p atmega328pb -c stk500v1 -P COM4 -b 19200 -B 0.5 -e -Ulock:w:0x3F:m -Uefuse:w:0xFD:m -Uhfuse:w:0xD2:m -Ulfuse:w:0xFF:m

avrdude.exe: Version 6.3-20171130
             Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
             Copyright (c) 2007-2014 Joerg Wunsch

             System wide configuration file is "C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf"
             Additional configuration file is "C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf"
avrdude.exe: warning at C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf:1: part m328pb overwrites previous definition C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf:8802.

             Using Port                    : COM4
             Using Programmer              : stk500v1
             Overriding Baud Rate          : 19200
             Setting bit clk period        : 0.5
             AVR Part                      : ATmega328PB
             Chip Erase delay              : 9000 us
             PAGEL                         : PD7
             BS2                           : PC2
             RESET disposition             : dedicated
             RETRY pulse                   : SCK
             serial program mode           : yes
             parallel program mode         : yes
             Timeout                       : 200
             StabDelay                     : 100
             CmdexeDelay                   : 25
             SyncLoops                     : 32
             ByteDelay                     : 0
             PollIndex                     : 3
             PollValue                     : 0x53
             Memory Detail                 :

                                      Block Poll               Page                       Polled
               Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
               ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
               eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
               flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
               lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
               signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

             Programmer Type : STK500
             Description     : Atmel STK500 Version 1.x firmware
             Hardware Version: 2
             Firmware Version: 1.18
             Topcard         : Unknown
             Vtarget         : 0.0 V
             Varef           : 0.0 V
             Oscillator      : Off
             SCK period      : 0.1 us

avrdude.exe: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude.exe: Device signature = 0x1e9516 (probably m328pb)
avrdude.exe: safemode: lfuse reads as FF
avrdude.exe: safemode: hfuse reads as D2
avrdude.exe: safemode: efuse reads as F5
avrdude.exe: erasing chip
avrdude.exe: reading input file "0x3F"
avrdude.exe: writing lock (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude.exe: 1 bytes of lock written
avrdude.exe: verifying lock memory against 0x3F:
avrdude.exe: load data lock data from input file 0x3F:
avrdude.exe: input file 0x3F contains 1 bytes
avrdude.exe: reading on-chip lock data:

Reading | ################################################## | 100% 0.01s

avrdude.exe: verifying ...
avrdude.exe: 1 bytes of lock verified
avrdude.exe: reading input file "0xFD"
avrdude.exe: writing efuse (1 bytes):

Writing |  ***failed;  
################################################## | 100% 0.05s

avrdude.exe: 1 bytes of efuse written
avrdude.exe: verifying efuse memory against 0xFD:
avrdude.exe: load data efuse data from input file 0xFD:
avrdude.exe: input file 0xFD contains 1 bytes
avrdude.exe: reading on-chip efuse data:

Reading | ################################################## | 100% 0.01s

avrdude.exe: verifying ...
avrdude.exe: WARNING: invalid value for unused bits in fuse "efuse", should be set to 1 according to datasheet
This behaviour is deprecated and will result in an error in future version
You probably want to use 0xf5 instead of 0xfd (double check with your datasheet first).
avrdude.exe: 1 bytes of efuse verified
avrdude.exe: reading input file "0xD2"
avrdude.exe: writing hfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude.exe: 1 bytes of hfuse written
avrdude.exe: verifying hfuse memory against 0xD2:
avrdude.exe: load data hfuse data from input file 0xD2:
avrdude.exe: input file 0xD2 contains 1 bytes
avrdude.exe: reading on-chip hfuse data:

Reading | ################################################## | 100% 0.01s

avrdude.exe: verifying ...
avrdude.exe: 1 bytes of hfuse verified
avrdude.exe: reading input file "0xFF"
avrdude.exe: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude.exe: 1 bytes of lfuse written
avrdude.exe: verifying lfuse memory against 0xFF:
avrdude.exe: load data lfuse data from input file 0xFF:
avrdude.exe: input file 0xFF contains 1 bytes
avrdude.exe: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.01s

avrdude.exe: verifying ...
avrdude.exe: 1 bytes of lfuse verified

avrdude.exe: safemode: lfuse reads as FF
avrdude.exe: safemode: hfuse reads as D2
avrdude.exe: safemode: efuse reads as F5
avrdude.exe: safemode: Fuses OK (E:FD, H:D2, L:FF)

avrdude.exe done.  Thank you.

avrdude -C C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf -C +C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf -v -p atmega328pb -c stk500v1 -P COM4 -b 19200 -Uflash:w:bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex:i

avrdude.exe: Version 6.3-20171130
             Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
             Copyright (c) 2007-2014 Joerg Wunsch

             System wide configuration file is "C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf"
             Additional configuration file is "C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf"
avrdude.exe: warning at C:\Users\tomohiro\AppData\Local\Arduino15\packages\pololu-a-star\hardware\avr\4.0.2\extra_avrdude.conf:1: part m328pb overwrites previous definition C:\PROGRA~2\Arduino\hardware\tools\avr\etc\avrdude.conf:8802.

             Using Port                    : COM4
             Using Programmer              : stk500v1
             Overriding Baud Rate          : 19200
             AVR Part                      : ATmega328PB
             Chip Erase delay              : 9000 us
             PAGEL                         : PD7
             BS2                           : PC2
             RESET disposition             : dedicated
             RETRY pulse                   : SCK
             serial program mode           : yes
             parallel program mode         : yes
             Timeout                       : 200
             StabDelay                     : 100
             CmdexeDelay                   : 25
             SyncLoops                     : 32
             ByteDelay                     : 0
             PollIndex                     : 3
             PollValue                     : 0x53
             Memory Detail                 :

                                      Block Poll               Page                       Polled
               Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
               ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
               eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
               flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
               lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
               calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
               signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

             Programmer Type : STK500
             Description     : Atmel STK500 Version 1.x firmware
             Hardware Version: 2
             Firmware Version: 1.18
             Topcard         : Unknown
             Vtarget         : 0.0 V
             Varef           : 0.0 V
             Oscillator      : Off
             SCK period      : 0.1 us

avrdude.exe: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude.exe: Device signature = 0x1e9516 (probably m328pb)
avrdude.exe: safemode: lfuse reads as FF
avrdude.exe: safemode: hfuse reads as D2
avrdude.exe: safemode: efuse reads as F5
avrdude.exe: NOTE: "flash" memory has been specified, an erase cycle will be performed
             To disable this feature, specify the -D option.
avrdude.exe: erasing chip
avrdude.exe: reading input file "bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex"
avrdude.exe: writing flash (32768 bytes):

Writing | ################################################## | 100% -0.00s

avrdude.exe: 32768 bytes of flash written
avrdude.exe: verifying flash memory against bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex:
avrdude.exe: load data flash data from input file bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex:
avrdude.exe: input file bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex contains 32768 bytes
avrdude.exe: reading on-chip flash data:

Reading | ################################################## | 100% 0.00s

avrdude.exe: verifying ...
avrdude.exe: 32768 bytes of flash verified

avrdude.exe: safemode: lfuse reads as FF
avrdude.exe: safemode: hfuse reads as D2
avrdude.exe: safemode: efuse reads as F5
avrdude.exe: safemode: Fuses OK (E:F5, H:D2, L:FF)

avrdude.exe done.  Thank you.


Successfully bootloaders\optiboot/optiboot_atmega328pb_8mhz.hex flashed for ATmega328PB.
